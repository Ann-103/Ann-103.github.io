<!--head 和 body 是 html 的直接子元素--><!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>计算机网络学习笔记（四） | Ann-Blog</title><meta name="author" content="Ann"><meta name="copyright" content="Ann"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Chapter 6 Internet Protocol    IP协议 英文  AS自洽系统 IGP 外部网关路由协议EGP RIP  概述  因特网是世界上最大IP网络，开放，任何接入Internet设备都必须运行IP协议 路由器：处理IP分组，包括L3交换机 ，连接不同的网络  ，数据转发 网络侧设备 用户侧设备   由于路由器里面所有层的功能都会配置（拥有完整的TCPIP协议族），但是出于我">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络学习笔记（四）">
<meta property="og:url" content="https://ann-103.github.io/post/2635928687.html">
<meta property="og:site_name" content="Ann-Blog">
<meta property="og:description" content="Chapter 6 Internet Protocol    IP协议 英文  AS自洽系统 IGP 外部网关路由协议EGP RIP  概述  因特网是世界上最大IP网络，开放，任何接入Internet设备都必须运行IP协议 路由器：处理IP分组，包括L3交换机 ，连接不同的网络  ，数据转发 网络侧设备 用户侧设备   由于路由器里面所有层的功能都会配置（拥有完整的TCPIP协议族），但是出于我">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2024/11/14/RbtQCHjSEMZJoUs.jpg">
<meta property="article:published_time" content="2022-10-24T00:07:22.000Z">
<meta property="article:modified_time" content="2024-12-02T06:23:27.800Z">
<meta property="article:author" content="Ann">
<meta property="article:tag" content="notebook">
<meta property="article:tag" content="network">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2024/11/14/RbtQCHjSEMZJoUs.jpg"><link rel="shortcut icon" href="https://s2.loli.net/2022/11/06/lgYVqNypjRCe3d2.png"><link rel="canonical" href="https://ann-103.github.io/post/2635928687.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: {"appId":"TYQ16Q4ESJ","apiKey":"ea175434f2803b60c631bc11c6e24e54","indexName":"blog","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":200,"languages":{"author":"作者: Ann","link":"链接: ","source":"来源: Ann-Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '计算机网络学习笔记（四）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-12-02 14:23:27'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/essay_page/essay_page.css"><link rel="stylesheet" href="/css/hot.css"><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="scarecrow"><div class="scarecrow__hat"><div class="scarecrow__ribbon"></div></div><div class="scarecrow__head"><div class="scarecrow__eye"></div><div class="scarecrow__eye"></div><div class="scarecrow__mouth"></div><div class="scarecrow__pipe"></div></div><div class="scarecrow__body"><div class="scarecrow__glove scarecrow__glove--l"></div><div class="scarecrow__sleeve scarecrow__sleeve--l"></div><div class="scarecrow__bow"></div><div class="scarecrow__shirt"></div><div class="scarecrow__coat"></div><div class="scarecrow__waistcoat"></div><div class="scarecrow__sleeve scarecrow__sleeve--r"></div><div class="scarecrow__glove scarecrow__glove--r"></div><div class="scarecrow__coattails"></div><div class="scarecrow__pants"></div></div><div class="scarecrow__arms"></div><div class="scarecrow__leg">  </div></div></div><script async="async">(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })
  document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})
  setTimeout(function(){preloader.endLoading();}, 10000);

  if (true) {
    document.addEventListener('pjax:send', () => { preloader.initLoading() })
    document.addEventListener('pjax:complete', () => { preloader.endLoading() })
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> About</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-paper-full"></i><span> 关于</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw iconfont icon-shuoshuo"></i><span> 动态</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Ann-Blog"><span class="site-name">Ann-Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-heart"></i><span> About</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw iconfont icon-paper-full"></i><span> 关于</span></a></li><li><a class="site-page child" href="/essay/"><i class="fa-fw iconfont icon-shuoshuo"></i><span> 动态</span></a></li></ul></div></div></div><div id="rightBank"><div id="box"> <a href="/link" title="百宝箱"><i class="iconfont icon-24gf-box2"></i></a></div><div id="random"><a class="site-page" href="javascript:toRandomPost()" title="随机前往一个文章"><i class="iconfont icon-touzi"> </i></a></div><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">计算机网络学习笔记（四）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-24T00:07:22.000Z" title="发表于 2022-10-24 08:07:22">2022-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-12-02T06:23:27.800Z" title="更新于 2024-12-02 14:23:27">2024-12-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Course/">Course</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">11.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span></div></div></div><div class="top-img gist" style="background-image: url(/false)"></div><article class="post-content" id="article-container"><h1 id="chapter-6-internet-protocol-ip协议">Chapter 6 Internet Protocol    IP协议</h1>
<h2 id="英文">英文</h2>
<ul>
<li>AS自洽系统</li>
<li>IGP</li>
<li>外部网关路由协议EGP</li>
<li>RIP</li>
</ul>
<p>概述</p>
<ul>
<li>因特网是世界上最大IP网络，开放，任何接入Internet设备都必须运行IP协议</li>
<li>路由器：处理IP分组，包括L3交换机 ，连接不同的网络  ，数据转发</li>
<li>网络侧设备</li>
<li>用户侧设备</li>
</ul>
<blockquote>
<p>由于路由器里面所有层的功能都会配置（拥有完整的TCPIP协议族），但是出于我们对于这个网络设备的功能，我们只说他会处理到网络层</p>
</blockquote>
<p>使用IP：网络仅实现最简单的方式，麻烦的就放终端处理，且使用数据报交换，包爱丢不丢</p>
<p>细腰结构，有很好的的可扩展性</p>
<p>而对比电信网络可以发现ip使用非常的简洁</p>
<h2 id="ip地址-形式和配置方法-和mac的区别">IP地址（形式和配置方法，和mac的区别）</h2>
<div class="note info flat"><p>IP在不同网络中是不同的，而mac可以直接设置</p>
</div>
<ul>
<li>32bit被分成8bit，用0-255的十进制表示，例如127.0.0.1，IPV4</li>
<li>前：<strong>网络号</strong>（网络前缀）表示<strong>位置</strong>，标志了在哪个网络中</li>
<li>后：<strong>主机号</strong>表示<strong>身份</strong>，在网络中定位节点，长度表示网络容纳节点数量</li>
</ul>
<blockquote>
<p>不同的网络可能有相同的主机号，和mac不同。</p>
<p>ip必须要有位置信息，不然路由器无法根据目的地进行分组</p>
</blockquote>
<h3 id="ip">IP</h3>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221031110247738.png" alt="image-20221031110247738" style="zoom:80%;" />
<p>通过类别快速找到网络号</p>
<table>
<thead>
<tr>
<th>类别</th>
<th>说明</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>0 7位网络号 24位主机号</td>
<td>太多了，很庞大且浪费</td>
</tr>
<tr>
<td>B</td>
<td>10 14位网络号 16位主机号</td>
<td>同样多</td>
</tr>
<tr>
<td>C</td>
<td>110 21位网络号 8位主机号</td>
<td>C类别实际中很常用</td>
</tr>
<tr>
<td>D</td>
<td>1110 组播地址标识一个组的地址</td>
<td>一对多通信，形成组播组</td>
</tr>
<tr>
<td>E</td>
<td>11110</td>
<td>保留地址</td>
</tr>
</tbody>
</table>
<p><strong>IP地址说明</strong></p>
<p>广播：因为不知道信息，很多使用全1 地址，其他的不常用，用作<strong>目的地址</strong></p>
<p>回环地址：自己的地址127 .0.0.1 后面三位随意</p>
<p>不用测试：全零，用作<strong>源地址</strong>，</p>
<p><strong>IP地址分配</strong></p>
<ul>
<li>使用层次结构管理</li>
<li>手动配置</li>
<li>用户拨号PPP协议</li>
<li>基于DHCP的配置，比如连接wlan后即需要找ip地址，
<ul>
<li>RFC 2131</li>
<li>采用客户/服务器模式，消息采用UDP协议封装</li>
<li>IP地址分配机制
<ul>
<li>自动分配： DHCP给客户端分配一 个永久的IP地址</li>
<li>动态分配： DHCP给客户端分配一个一段时间内有效的IP地址</li>
<li>手动分配：客户端IP地址由网络管理员分配， DHCP仅用来将分配的地址通报给客户端</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>PPP协议有IPCP等针对IP的分配，即电信的很多上网都是拨号上网（调制解调器）。然后可能有个人的路由器，使用的是基于DHCP的配置。</p>
<p>DHCP同时配置DNS路由等，这里我们仅先考虑ip地址的部分</p>
</blockquote>
<p><strong>DHCP流程</strong></p>
<ul>
<li>
<p>客户端广播（一个广播域）<strong>DHCPDISCOVER</strong>  ，源IP：0.0.0.0 目的：225.225.225.225，mac标识</p>
</li>
<li>
<p>DHCP服务器回应<strong>DHCPOFFER</strong>消息 ，包含分配的IP地址、租用期限和其它配置参数</p>
<blockquote>
<p>动态分配是有使用期限的</p>
</blockquote>
</li>
<li>
<p>客户端选择一个DHCP服务器并且在整个网络上广播<strong>DHCPREQUEST</strong>消息，告知别的服务器</p>
<blockquote>
<p>选择依据往往是快慢</p>
</blockquote>
</li>
<li>
<p><strong>DHCPREQUEST</strong>  的天选服务器回复<strong>DHCPACK</strong>，其中包含有配置参数</p>
</li>
<li>
<p>客户端接收到<strong>DHCPACK</strong>后，应该对参数进行最后的检查</p>
</li>
<li>
<p><strong>使用IP</strong></p>
</li>
<li>
<p>客户端可以通过向DHCP服务器发送<strong>DHCPRELEASE</strong>消息来释放对IP地址的租用，其中包含有客户端的MAC地址和租用IP地址</p>
</li>
</ul>
<blockquote>
<p>打开电脑后，会先连接wlan，然后完成上述DHCP过程，然后才可以上网，同时配置的还有路由和DNS等</p>
<p>很多时候我们并不会即使关闭WiFi，非正常中断即有效期over</p>
</blockquote>
<p><strong>DHCP中继</strong></p>
<ul>
<li>
<p>很多时候不要浪费一个网络一个DHCP服务器，此时需要配置Relay或者相关功能</p>
</li>
<li>
<p>Relay中继将客户端的请求啥的，通过单播的方式发送给服务器</p>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221102081125210.png" alt="image-20221102081125210" style="zoom: 80%;" />
</li>
</ul>
<p><strong>IP地址和MAC地址</strong></p>
<ul>
<li>
<p>MAC地址在链路或者局域网唯一</p>
<table>
<thead>
<tr>
<th></th>
<th>MAC</th>
<th>IP</th>
</tr>
</thead>
<tbody>
<tr>
<td>形式</td>
<td>64bit，冒号分割的16进制数表示</td>
<td>32bit，逗号分割</td>
</tr>
<tr>
<td>网络</td>
<td>链路或者局域网标识不同节点</td>
<td>网络中标识不同节点</td>
</tr>
<tr>
<td>分配</td>
<td>统一分配，HIVE？给厂商自己分配</td>
<td>DHCP协议等，需要配置</td>
</tr>
<tr>
<td>作用</td>
<td>标识作用，与节点位置无关，一般事先固化在网络设备中</td>
<td>身份（唯一）和位置（和网络有关）</td>
</tr>
</tbody>
</table>
</li>
</ul>
<h2 id="地址解析协议">地址解析协议</h2>
<blockquote>
<p>如果无法访问，可能域名出问题（上层）。如果无法上网，可能地址解析问题</p>
</blockquote>
<h3 id="寻址">寻址</h3>
<div class="note warning flat"><p>网络和链路和广播域和二层交换机连接等概念需要连接，不同网络需要三层交换机</p>
<p>计网的链路是一个网络！并不是一个物理连接！</p>
</div>
<ul>
<li>首先进行<strong>网络寻址</strong>：数据跨网络传输，基于IP地址，事实上是依据IP的网络前缀（如何提取）
<ul>
<li>路由器将分组基于IP转发</li>
</ul>
</li>
<li>然后进行<strong>链路寻址</strong>：在网络内传输基于MAC
<ul>
<li>L2交换机基于MAC地址将分组在物理链路上转发（属于同一个网络中）</li>
<li>二层交换机的交换过程之前有提及，即转发表</li>
</ul>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221102081006597.png" alt="image-20221102081006597" style="zoom:67%;" />
<img src="assets/image-20221102082508040.png" alt="image-20221102082508040" style="zoom: 80%;" />
<div class="note info flat"><p>数据帧在不同链路上传输时，源和目的MAC地址变化，而源和目的IP地址不变</p>
<p>从路由器转发表的内容可以发现，不同端口确实MAC地址也不同，路由表和转发表可以看成一个</p>
</div>
<p>H-&gt;W：下一跳永远是在一个链路！</p>
<ul>
<li>输入url，网络层寻址，查找转发表（路由算法-路由器-转发表）</li>
<li>目的地址：
<ul>
<li>目的地址IP地址网络号相同的（网络前缀），则直接在一条链路上</li>
<li>缺省路由表示和所有的IP地址都表示，优先级最低，如果找不到就用这个，此时下一跳是路由器，需要制定好端口</li>
<li>路由器的端口一定是主机H所在端口，即主机H的<strong>下一跳是本链路</strong>！！！即202.1.3.2端口</li>
<li>数据传到下一跳，通过<strong>链路寻址</strong>，IP分组封装链路层的帧，但是下一跳的目的地址<strong>不知道mac地址</strong>！进行地址解析。</li>
</ul>
</li>
</ul>
<blockquote>
<p>202.1.3.0 c类网络</p>
</blockquote>
<div class="note info flat"><p>如果数据不通，传不到别的网络，很大可能是mac解析出现问题！</p>
</div>
<details class="toggle" ><summary class="toggle-button" style="">图</summary><div class="toggle-content"><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102083612326.png" alt="image-20221102083612326" style="zoom: 80%;" />
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102084430224.png" alt="image-20221102084430224" style="zoom: 80%;" />
</div></details>
<h3 id="地址解析-地址解析作用和过程">地址解析（地址解析作用和过程）</h3>
<div class="note info flat"><p>ARP过程被限制在链路范围(同一个网络)内，始终是查找转发表得到转发的下一跳节点的IP地址，然后对该IP地址做ARP。</p>
</div>
<ul>
<li>协议 ARP，非软件：<strong>决定了在链路上，封装IP分组的帧会被哪个网络接口接收</strong>  ，在链路层次上窃听数据</li>
<li>情况1：目的IP地址所对应的主机和发送主机在同一个网络内
<ul>
<li>每个主机都有<strong>ARP缓存</strong>，用来存放一些IP地址与MAC地址的对应关系</li>
<li>如果没查到，就向<strong>广播地址</strong>发送<strong>ARP请求</strong> ，被请求的IP地址所对应的主机返回一个<strong>ARP响应</strong>。</li>
<li>主机发送数据帧，并将该IP地址与MAC地址对存放在ARP缓存中</li>
</ul>
</li>
<li>情况2：目的IP地址所对应的主机和发送主机在两个不同的网络内
<ul>
<li>主机通过查找转发表得到转发的下一跳网络节点IP地址（第一跳路由器），对该IP地址执行ARP过程，然后发送数据</li>
<li>第一跳路由器查找转发表得到第二跳路由器的IP地址，对该IP地址执行ARP过程，然后发送数据  ，以此类推</li>
<li>目的网络的路由器查找转发表知道目的节点和自己在同一个网络中，对目的IP地址执行ARP过程，然后将数据发送到目的节点</li>
</ul>
</li>
</ul>
<details class="toggle" ><summary class="toggle-button" style="">一个实例</summary><div class="toggle-content"><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102085502695.png" alt="image-20221102085502695" style="zoom: 80%;" />
</div></details>
<p><strong>ARP攻击</strong></p>
<ul>
<li>检测可疑的ARP流量</li>
<li>划分子网，VLAN等方式限制ARP广播域</li>
<li>在ARP Cache中静态配置IP和MAC地址的映射表项  ，重要节点，主要是缺省路由器</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102090058071.png" alt="image-20221102090058071" style="zoom: 80%;" />
<blockquote>
<p>把A发到B的所有的ARP请求劫持</p>
</blockquote>
<h3 id="arp协议">ARP协议</h3>
<ul>
<li>
<p>严格来说，ARP是链路层协议，但是包含网络ip信息，很多都称之为2.5层协议</p>
</li>
<li>
<p>特殊情况</p>
<ul>
<li>
<p>目的IP地址为广播地址，目的MAC地址为FF:FF:FF:FF:FF: FF</p>
</li>
<li>
<p>目的IP地址为组播地址</p>
<ul>
<li>
<p>目的MAC地址：采用地址映射，即将IP组播地址的低23位映射到MAC地址的低23位，前面加上01005E</p>
<blockquote>
<p>多到一的映射，低28位不同，但是概率很小</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102090559135.png" alt="image-20221102090559135" style="zoom:67%;" />
<h2 id="ip协议-计算：ip分段原因原理-8字节-的整数倍">IP协议（计算：IP分段原因原理，8字节 的整数倍）</h2>
<p><strong>路由器对IP分组的操作</strong></p>
<ol>
<li>验证校验和</li>
<li>TTL值减一</li>
<li>重新计算校验和</li>
<li>根据需要执行分段操作</li>
<li>处理一些需要路由器处理的选项</li>
<li>分组转发
<ul>
<li>根据目的IP地址查找转发表</li>
<li>交换</li>
</ul>
</li>
</ol>
<p><strong>IPv4头标格式</strong>  ：32bit 和之前的32位机对应，保留，可能要填充</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107100550544.png" alt="image-20221107100550544"></p>
<blockquote>
<p>选项不定，表示新功能，可扩展，但不固定使得路由器处理复杂，但是大部分都不用选项，只用了前20byte</p>
</blockquote>
<p><strong>IP帧</strong></p>
<div class="tabs" id="ip帧"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="ip帧-1">版本号与头标长度</button><button type="button" class="tab " data-href="ip帧-2">总长度和分段</button><button type="button" class="tab " data-href="ip帧-3">TTL和协议</button></ul><div class="tab-contents"><div class="tab-item-content active" id="ip帧-1"><ul>
<li>
<p>版本号（VERS）： 4bits， IPv4协议填4， IPv6协议填6。IP分组头长度（LEN）： 4bits， 单位为4字节，取值范围5-15（确省值为5，即标准头标长20字节），指示IP分组头的长度。</p>
</li>
<li>
<p>服务类型（TOS）：没啥用，大家都想高优先级，该排队还是排</p>
</li>
</ul></div><div class="tab-item-content" id="ip帧-2"><ul>
<li>
<p>总长度和分段</p>
<ul>
<li>
<p>不同网络的MTU不同，可能在路由器或者端口进行分段</p>
</li>
<li>
<p>总长度（Total length）： 16bits ，单位字节，描述<strong>IP分组的总长</strong>（包括头标和数据），最大分组长度为65535字节。</p>
</li>
<li>
<p>标识符(Identification)： 16bits，用于唯一标识分段所属的<strong>分组</strong>。</p>
</li>
<li>
<p>标志(flag)： 3bits，第1位未定义，第2位为0表示该分组可分段，否则表示不可分段；第3位为0表示这是<strong>最后的分段</strong>，否则则表示还有后续分段。</p>
</li>
<li>
<p><strong>段偏移</strong>： 13bits，单位8字节。取值0-8191，标明当前分段在<strong>原分组中位置</strong>。  （重组）</p>
<blockquote>
<p>除了最后一个分段，前面的所有分段都是8字节的整数倍，因为段偏移是整数倍</p>
</blockquote>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221102092222023.png" alt="image-20221102092222023" style="zoom: 80%;" />
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107095506309.png" alt="image-20221107095506309" style="zoom: 80%;" />
</li>
</ul></div><div class="tab-item-content" id="ip帧-3"><p><strong>TTL和协议</strong></p>
<p>生存时间(TTL: Time to Live)： 8bits，单位秒，表示分组的生存时间。实际操作时，分组每经过一个路由器， TTL值减一，当TTL值为0时，该分组被丢弃</p>
<p>协议（Protocol）：表示封装在IP分组中的载荷的协议类型。</p>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107095717272.png" alt="image-20221107095717272" style="zoom:80%;" />
<p><strong>校验和与地址</strong></p>
<p>分组头校验和： 16bits，用来检验IP头标在传输过程中是否被破坏。<br>
源地址： 32bits，分组发送者的IP地址。<br>
目的地址： 32bits，分组接收者的IP地址。<br>
填充（padding）：分组头长度必须为4字节的整数倍，如果选项<br>
的长度不是4字节的整数倍，那么就要进行填充。</p>
<p><strong>校验过程</strong></p>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107105742931.png" alt="image-20221107105742931"></p>
<p><strong>选项</strong></p>
<p>可选SR（source routing 源路由选择）的源路由选择，即确定具体的路由路径</p>
<blockquote>
<p>IPV6+将这个选项作为了一个功能，比如SR SDN可编程网络等新的功能开发，很多研究都偏向于数据中心网络</p>
</blockquote></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<blockquote>
<p>邮件不实时不可靠</p>
</blockquote>
<h2 id="ip路由和转发">IP路由和转发</h2>
<table>
<thead>
<tr>
<th>概念</th>
<th>说明</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>路由表</td>
<td>至少<strong>目的网络</strong>（网络前缀）/目的主机地址和<strong>下一跳地址（端口）</strong></td>
<td><strong>路由器</strong>（可能有别的）上由路由协议（ip协议有关内容）动态生成和维护</td>
</tr>
<tr>
<td>转发表（可等价，通过ARP和路由表建立）</td>
<td>增加输出端口，MAC等信息</td>
<td><strong>主机</strong>转发表一般手动或者DHCP动态配置。<strong>不具体区分这俩了</strong></td>
</tr>
<tr>
<td>缺省路由（目的网络：0.0.0.0）</td>
<td>和所有的目的ip地址都匹配，连接到互联网</td>
<td>总能找到表项（完备性），有效减少路由表表项数目，同时会有一个default路由</td>
</tr>
</tbody>
</table>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107102020343.png" alt="image-20221107102020343" style="zoom:80%;" />
<blockquote>
<p>/24表示前24位表示网络号c类网络。下一跳是在相同链路，故端口也是限定的，我们描述下一跳的时候也要说明端口网络，而不是某个网络。比如网络210.1.2.0 对应端口 210.1.2.2作为下一跳。</p>
<p>建议使用ip命令，比ifconfig等更加强大</p>
</blockquote>
<h3 id="路由协议">路由协议</h3>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107110654552.png" alt="image-20221107110654552" style="zoom:80%;" />
<table>
<thead>
<tr>
<th>名称</th>
<th>说明</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>AS自治系统  （因特称<strong>路由选择器</strong>）</td>
<td>同一个管理实体控制，具有相同路由选择策略（算法）的IP网络和路由器集合</td>
<td></td>
</tr>
<tr>
<td>距离矢量协议算法</td>
<td></td>
<td></td>
</tr>
<tr>
<td>链路状态协议算法</td>
<td></td>
<td>泛洪代价，快速，最多使用</td>
</tr>
<tr>
<td>内部网关路由协议IGP</td>
<td></td>
<td></td>
</tr>
<tr>
<td>RIP（路由信息协议 ）实现距离矢量</td>
<td>路由器向邻居路由器通告到达所有网络的距离</td>
<td></td>
</tr>
<tr>
<td>OSPF(开放最短路径优先协议 )实现链路状态</td>
<td></td>
<td></td>
</tr>
<tr>
<td>外部网关路由协议EGP</td>
<td></td>
<td></td>
</tr>
<tr>
<td>边界网关协议  BGP ，<strong>距离矢量</strong></td>
<td>骨干网不会频繁更改。在边界路由器之间交换网络可达信息</td>
<td></td>
</tr>
</tbody>
</table>
<p><strong>RIP</strong></p>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221107105357412.png" alt="image-20221107105357412" style="zoom:80%;" />
<ul>
<li>子网掩码，32bit特殊ip地址，用于获得网络前缀，直接进行逻辑与运算，比如c类网络24位前缀是 255.255.255.0</li>
</ul>
<p><strong>OSPF</strong></p>
<ul>
<li>定义了在路由器之间交换链路状态信息的机制</li>
<li>增加了特性
<ul>
<li>路由选择消息的认证（信任）</li>
<li>附加的层次性
<ul>
<li>允许将路由选择域（Domain）划分为区（Area），多个网络组成一个区，对于AS的其余部分隐藏 ，以减少路由信令开销，<strong>区域内的路由选择</strong>仅仅由区域自己的拓扑来决定</li>
</ul>
</li>
<li>负载均衡
<ul>
<li>k最短路径，允许到同一位置的多条路由具有相同的开销，网络业务在这些路径上均匀分配。防止都选择最短路径导致拥塞</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p>认证是防止某节点恶意通知开销为零的路由选择消息进行数据引流攻击</p>
</blockquote>
<h2 id="icmp协议：internet-控制消息协议">ICMP协议：Internet 控制消息协议</h2>
<table>
<thead>
<tr>
<th>特征</th>
<th>说明</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>网络层协议</td>
<td>需要经过IP协议封装。同样ICMP也不能保证可靠传</td>
<td></td>
</tr>
<tr>
<td>发送</td>
<td>当分组由于各种原因无法投递而遭丢弃时，就用ICMP发送差错报告</td>
<td></td>
</tr>
<tr>
<td>网络诊断工具ping</td>
<td>测试主机的可到达性、往返延迟、丢包率等网络信息  ，ICMP的回音请求/响应（Echo request/reply）报文 。</td>
<td>可能被屏蔽，不一定是不通</td>
</tr>
<tr>
<td>网络诊断工作traceroute</td>
<td>发现从源主机到目的主机路径上的网络节点  。原理是发送TTL=1返回第一条节点超时发送功能，即第一个路由位置，递增TTL发现第二个路由器等</td>
<td>同理某些节点路由器不返回超时信息</td>
</tr>
</tbody>
</table>
<blockquote>
<p>某个节点可能会关闭对某个指令的功能，不希望被发现等</p>
</blockquote>
<h2 id="ip组播">IP组播</h2>
<table>
<thead>
<tr>
<th>概念</th>
<th>说明</th>
<th>适用</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>组播（多播）</td>
<td>1对多通信 ，D类地址，表示一组主机，有28位标识（25亿）</td>
<td></td>
<td>用于会议电视，视频传播游戏，分布式计算等</td>
</tr>
</tbody>
</table>
<blockquote>
<p>现在网络想要往小了做因为交换机和路由器变便宜</p>
</blockquote>
<h2 id="ipv4可扩展性-子网划分-最长前缀是不知道长度-cidr有前缀汇聚和最长匹配规则-尽量少">IPv4可扩展性（子网划分，最长前缀是不知道长度，CIDR有前缀汇聚和最长匹配规则，尽量少）</h2>
<p><strong>IPV4地址的不足</strong></p>
<ul>
<li>数量不够</li>
<li>IP地址中网络号或主机号为全0或全1的一般用做特殊处理，不用来标识网络或主机</li>
<li>路由器特别是核心网络路由器路由表(转发表)表项急剧膨胀，从而降低路由效率</li>
</ul>
<p><strong>延缓耗尽的解决方案</strong></p>
<ul>
<li>网络<strong>地址转化</strong>，在一个家庭中，可以重复使用某个ip
<ul>
<li>在网络中重复利用某些IP地址块提高IP地址的利用率</li>
</ul>
</li>
<li>划分<strong>子网</strong>或者无类别域间寻路<strong>CIDR</strong>
<ul>
<li>对IP地址进行汇聚，以减少路由协议中路由选择消息携带的和路由器的路由表中储存的网络号的数量</li>
</ul>
</li>
</ul>
<div class="tabs" id="不足"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="不足-1">子网划分</button><button type="button" class="tab " data-href="不足-2">CIDR</button><button type="button" class="tab " data-href="不足-3">NAT</button></ul><div class="tab-contents"><div class="tab-item-content active" id="不足-1"><p><strong>子网划分</strong></p>
<p>划分子网空间不能重叠！</p>
<p>本质是将一个大的地址块根据需要划分成地址空间<strong>互不重叠</strong>的小的地址块 ，要求这些小的地址块的子网号不同</p>
<p><strong>子网</strong>：对外仍然表现为一个单独的网络，只有一个网络号 。但是给每个主机一个特定的IP地址，网络号+子网ID+主机号  ，其中子网号是网络号加子网ID</p>
<ul>
<li>子网id可以为全零全一（有的说不对），只要保证子网号即可</li>
<li>主机数量少俩（一个主机一个ip</li>
</ul>
<p><strong>子网掩码</strong>  :32bits的位模式，表示方法与IP地址类似，1对应于IP地址的子网号， 0对应主机号</p>
<p><strong>步骤</strong></p>
<ol>
<li>子网数量决定子网ID的长度  ,主机数量决定了主机号的长度</li>
<li>子网号（网络号+子网ID）的长度确定子网掩码</li>
<li>确定主机号，给子网内的主机分配IP地址，注意主机号最大值由主机号的长度决定</li>
<li>根据子网掩码、子网号等信息配置每个路由器上的转发表</li>
</ol>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221109085513229.png" alt="image-20221109085513229" style="zoom:80%;" />
<ul>
<li>如果要求的是设备数量，可以通过主机数判断子网ID的长度，然后选择合适的子网ID</li>
<li>对于一个网络可以划分成不同子网，子网掩码可以不同，对应子网号是自己选的，但是假设有m位的子网ID可以找，可能取某个ID和其他子网的IP会重合，比如前两位子网号为10 ,后面就不能选三位子网为100，而是必须找111或者110</li>
<li>路由表的配置：目的地址需要和子网掩码进行与运算，如果得到对应的子网号，则跳入对应子网，反之走缺省路由。</li>
</ul></div><div class="tab-item-content" id="不足-2"><p><strong>无类别域间寻路 CIDR</strong></p>
<div class="note info flat"><p>目标仍然是汇聚使得路由表表项减少，解决IPV4不足</p>
</div>
<p>CIDR是一个新的IP分配方式（IETF，目前），取代了之前说的ABCD类的地址</p>
<p>子网是原有的IP分配下细分的过程，<strong>现在通常将一个网络称之为子网</strong></p>
<ul>
<li>
<p>可变长度的网络前缀(network prefix)</p>
</li>
<li>
<p>具有相同前缀的IP地址组成CIDR Block，表示为202.38.208.0/20  ，其中20为前缀长度</p>
</li>
</ul>
<img src="assets/image-20221114095612461.png" alt="image-20221114095612461" style="zoom: 80%;" /></div><div class="tab-item-content" id="不足-3"><p><strong>网络地址转化 NAT</strong></p>
<blockquote>
<p>基本思想：</p>
<p>对于用户来说透明，因为操作在NAT设备而非用户主机上进行，重复利用IP地址</p>
</blockquote>
<p>网络内的多台主机共享一个或者少量全局的IP地址 ，那么给定IP地址如何知道对应哪个主机，哪个应用？</p>
<p>NAT设备上需维护一个全局IP地址池，对于每个访问外部网络的内部主机，都需要使用一个全局的IP地址</p>
<p>NAT设备（网关），使用的TCP或UDP协议，<strong>应用会话</strong>：&lt;源IP地址、目的IP地址、源端 号、目的端口号、协议&gt;</p>
<blockquote>
<p>网关是在传输层以上的所有设备。NATPT网络地址转化IPV4-6，</p>
</blockquote>
<blockquote>
<p>传输层提供网络层的一个逻辑应用上的管道</p>
</blockquote>
<img src="assets/image-20221114101313871.png" alt="image-20221114101313871" style="zoom: 80%;" />
<ul>
<li>
<p>全局/公共IP地址：用于Internet上的分组转发，要求在Internet范围内<strong>唯一</strong></p>
</li>
<li>
<p>私有IP地址：用于指定网络内的分组转发，只要求在指定网内部唯一</p>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114100751559.png" alt="image-20221114100751559" style="zoom:67%;" />
</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114100421477.png" alt="image-20221114100421477"></p>
<p>网络地址和端口转换NAPT  ：</p>
<ul>
<li>更改IP投标和TCP UDP头标端口号，导致NAT表项记录每一个应用会话，十分庞大</li>
<li>端口号标记应用会话</li>
</ul>
<p>NAT表项：动态生成，如果不使用就删除</p>
<p><strong>NAT局限性</strong></p>
<ul>
<li>地址和端口每次都要转化，<strong>开销</strong>大</li>
<li>对应用不透明，因为不同应用的IP和端口号可能在载荷的不同位置，需要在NAT设备打补丁进行特定协议的处理</li>
<li>非UDP和TCP，比如VPN使用PPTP协议，没有端口概念，ping使用ICMP（Internet控制端口协议）找类似于端口号的标识，比如ICMP的id</li>
<li>破坏了原有的主机到主机的通信模型</li>
</ul>
<p><strong>通信模型被破坏</strong>（地位不对等）</p>
<ul>
<li>限制了P2P点对点：外部主机无法主动发送会话，一定要内部先到外部才能在NAT上有记录表项</li>
<li>如果ABC都在NAT之后，死锁，需要上游技术</li>
</ul></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="ipv6">IPv6</h2>
<blockquote>
<p>2011年INNA消耗了所有IPV4，下面还在分配中。通过扩展长度来根本性解决。</p>
</blockquote>
<p><strong>简介</strong></p>
<ul>
<li>地址长度变长，但更简洁，处理效率更高</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114104804115.png" alt="image-20221114104804115"></p>
<blockquote>
<p>IPV6简化TTL校验和等，不支持中间路由器分段，但可以发送主机分段等，扩展功能支持校验等</p>
</blockquote>
<ul>
<li>
<p>128bit 分配8个四位十六进制，连续的0可以省略（只能1处）</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114105304302.png" alt="image-20221114105304302"></p>
</li>
<li>
<p>访问需要中括号，否则被认为是字符串</p>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114105351722.png" alt="image-20221114105351722"></p>
</li>
</ul>
<h1 id="chapter-7-传输层-端到端-传输层原因-传输层端口寻址-tcp拥塞-重传定时器-socket-tcp序列号和速率">Chapter 7 传输层（端到端，传输层原因，传输层端口寻址，tcp拥塞，重传定时器，socket，tcp序列号和速率）</h1>
<p><strong>概述</strong></p>
<ul>
<li>主要功能：向上层应用提供不同类型传输服务
<ul>
<li>面向连接、可靠：两个端点之间协商参数（序列号、流量控制参数、最大传输单元等）</li>
<li>无连接、不可靠</li>
</ul>
</li>
<li>端到端：中间路由器不处理传输层数据，只在通信端点上进行</li>
<li>协议
<ul>
<li>UDP</li>
<li>TCP</li>
</ul>
</li>
</ul>
<h2 id="英文">英文</h2>
<details class="toggle" ><summary class="toggle-button" style="">英文缩写</summary><div class="toggle-content"><p>用户数据报协议（UDP： User Datagram Protocol）</p>
<p>用户数据报协议（UDP： User Datagram Protocol）</p>
<p>传输协议数据单元（TPDU： TransportProtocol Data Unit）</p>
</div></details>
<h2 id="传输层服务">传输层服务</h2>
<div class="note success flat"><p>用户可以控制选择，是面向传输部分的最高层，同时也是用户功能中的最低层  。</p>
</div>
<p>TSAP：传输层地址，TCP和UDP上的端口号等，表示应用进程，在<strong>TSAP之间建立逻辑通信管道</strong></p>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221114110305047.png" alt="image-20221114110305047" style="zoom:80%;" />
<p><strong>传输层导入原因</strong></p>
<ul>
<li>不同主机上的进程之间的通信  ，每个应用进程都至少与一个传输层地址（TSAP）相关联</li>
<li>用户对数据传输的控制 ，运行在用户主机上</li>
<li>屏蔽下层网络的异质性，对上层应用提供了一个标准的原语集合(服务调用<strong>接口</strong>)  ，比如套接口。</li>
</ul>
<h2 id="建立连接">建立连接</h2>
<blockquote>
<p>虚电路连接，介入资源的使用状态，物理和网络连接也是对资源的分配</p>
</blockquote>
<ul>
<li><strong>协商参数</strong>： 连接建立过程，发送端和接收端协商保证这种可靠传输(包括流量控制)的参数
<ul>
<li>序列号：确认重传机制下的重复和乱序</li>
<li>接收端缓存大小等，接收方接收能力</li>
</ul>
</li>
</ul>
<h3 id="建立连接">建立连接</h3>
<blockquote>
<p>建立连接也需要发包，发包就可能丢失延迟导致重复多次建立等，故并不是一次发包即可，需要使用定时器等</p>
</blockquote>
<p><strong>三步握手</strong>（序列号最重要，可处理重复延迟分组）</p>
<ul>
<li>主机1选择一个序号x， 并向主机2发送包含该序号的连接请求CR</li>
<li>主机2应答连接确认ACK，其中包含确认号x和序列号y</li>
<li>主机1在其发送的第一个数据中采用序列号为x， 并确认主机2的序列号y</li>
</ul>
<p>序列号确认后，收到延迟重复的包 主机1拒绝，</p>
<img src="assets/image-20221114111800841.png" alt="image-20221114111800841"  />
<h3 id="释放连接">释放连接</h3>
<p>非对称释放：单方断开，可能丢失信息</p>
<p>对称释放</p>
<ul>
<li>把连接看作是由两个独立的单向连接，并要求单独释放每一个单向连接</li>
</ul>
<h2 id="internet-传输层协议">Internet 传输层协议</h2>
<blockquote>
<p>传输层协议是针对应用而言，很多运营商会基于UDP改良的QUIC进行业务的优化</p>
</blockquote>
<table>
<thead>
<tr>
<th>概念</th>
<th>介绍</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>UDP</td>
<td>TPDU称为数据报(datagram)</td>
<td></td>
</tr>
<tr>
<td>TCP</td>
<td>TPDU称为TCP数据段(segment)</td>
<td></td>
</tr>
<tr>
<td>端口</td>
<td>- TSAP对应为端口，标识应用进程，其数据通过端口向下交付给传输层    <br />- 传输层通过不同的端口交付不同应用进程</td>
<td><img src="assets/image-20221116080215550.png" alt="image-20221116080215550" style="zoom: 80%;" /></td>
</tr>
<tr>
<td>端口号（80/tcp）</td>
<td>16 bit  ，只具有本地（机）意义  <br />- 知名端口：0-1023，常用进程<br />- 一般端口，随时分配</td>
<td>知名端口是针对网络服务缺省情况，比如网络80端口www。比如个人指定端口后，对方需要知道端口才能进行服务，测试使用</td>
</tr>
</tbody>
</table>
<h3 id="interinternet寻址模型">InterInternet寻址模型</h3>
<ul>
<li>端口号：由程序或者系统指定（缺省）</li>
<li>IP地址：标识主机，同上</li>
<li>发送数据包括：发送方的地址和端口（源），接收方（目的）。跨越网络传输保持不变</li>
<li>MAC地址，链路唯一，帧的源和目的MAC地址随链路变化</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116080930187.png" alt="image-20221116080930187"></p>
<h3 id="用户数据报协议-udp">用户数据报协议-UDP</h3>
<blockquote>
<p>UDP： RFC 768  ，数据报，不可靠效率高的</p>
</blockquote>
<p><strong>UDP头标</strong></p>
<ul>
<li>UDP数据段前面加上<strong>IP伪头标</strong></li>
<li><strong>数据域</strong>偶数字节，否则填充一个0字节</li>
<li>将校验和域的值置为0</li>
<li>（伪头标+UDP头标+数据+可能的填充）以16比特为单位反码<strong>求和，再取反</strong>， 当结果为0时，将校验和置为全1。 除此之外的情况，将结果原封不动地作为校验和</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116081928703.png" alt="image-20221116081928703" style="zoom:80%;" />
<p><strong>UDP协议传输消息</strong></p>
<blockquote>
<p>将所有的数据都处理成数据报，编程简单直接发送，但极易丢包。</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116082203908.png" alt="image-20221116082203908" style="zoom:80%;" />
<p><strong>UDP应用</strong></p>
<ul>
<li>效率高，可靠性不敏感的引入，比如视频（事与愿违）。</li>
<li>客户-服务器。最出名的应用：DNS域名系统</li>
</ul>
<blockquote>
<p>为什么不直接使用IP，而引入UDP，即传输层的必要性。</p>
</blockquote>
<h3 id="传输控制协议-tcp-拥塞控制">传输控制协议-TCP（拥塞控制</h3>
<blockquote>
<p>TCP： RFC 793</p>
</blockquote>
<p><strong>特性</strong>：为了实现可靠传输</p>
<ul>
<li>超时重传和发送确认，缓存处理乱序</li>
<li>流量控制</li>
<li>拥塞控制：发生在网络的路由器上，将传输层的端到端发送加入网络影响（不停测量网络状态）。</li>
<li><strong>字节流</strong>(stream)传输：最小长度是1字节，按照数据段传输，只是形象说字节流
<ul>
<li>滑动窗口机制：发送的数据量由发送窗口大小决定，而不是以应用层递交的消息为单位；接收端每次向上层递交的数据量由落在接收窗口中并且有序的数据决定</li>
</ul>
</li>
<li>全双工（Full Duplex）
<ul>
<li>两个方向的TCP数据流，单元为<strong>数据段</strong></li>
</ul>
</li>
</ul>
<p><strong>数据传输机制</strong>：核心滑动窗口，可靠</p>
<ul>
<li>考虑到利用率，使用滑动窗口机制，一次发送一批</li>
<li>定时器：重传使用</li>
<li>参数：初始的窗口大小，数据段大小等</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116084724619.png" alt="image-20221116084724619" style="zoom:80%;" />
<div class="tabs" id="tcp头标"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="tcp头标-1">基础</button><button type="button" class="tab " data-href="tcp头标-2">标志</button><button type="button" class="tab " data-href="tcp头标-3">参数设置</button></ul><div class="tab-contents"><div class="tab-item-content active" id="tcp头标-1"><ul>
<li>
<p>源/目的端口</p>
</li>
<li>
<p>序列号：标识数据段中第一个字节在数据流的位置</p>
</li>
<li>
<p>确认号：ACK=1，即确认帧，有意义，标识下一个期待的子杰编号</p>
<blockquote>
<p>确认号对在此之前发送的帧进行确认</p>
</blockquote>
</li>
<li>
<p>头标长度：4字节为单位</p>
</li>
<li>
<p>保留：6bit 置零</p>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116083559533.png" alt="image-20221116083559533" style="zoom:80%;" /></div><div class="tab-item-content" id="tcp头标-2"><ul>
<li>URG：指示紧急指针有效，特殊用途</li>
<li>ACK：指示确认段有效</li>
<li>PSH：Push 操作，告诉接收主机立即将数据递交给应用进程</li>
<li>RST： 重置连接.（防火墙导致不能访问）</li>
<li>SYN：同步序列号，用于建立连接</li>
<li>FIN：发送此数据段的一端已发送完数据，用于释放连接</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116084800580.png" alt="image-20221116084800580" style="zoom:80%;" /></div><div class="tab-item-content" id="tcp头标-3"><ul>
<li>窗口大小：接收的字节数</li>
<li>检验和：检验TCP头标和数要加上伪IP头标</li>
<li>紧急指针： 指向紧急数据的最后一个字节，该指针仅在URG置1时有效，不讨论</li>
<li>选项：最大数据段尺寸选项，窗口尺度选项</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116084844706.png" alt="image-20221116084844706" style="zoom: 80%;" /></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<p><strong>TCP连接</strong></p>
<div class="note info flat"><p>在计算机网络中，五元组常用来标识一个应用层会话（session），包括基于UDP和TCP的会话</p>
</div>
<ul>
<li>
<p>将连接作为基本抽象,端点称为<strong>套接口</strong>(socket)，或套接字、插口。</p>
</li>
<li>
<p>套接口和端口、 IP 地址的关系</p>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116090903737.png" alt="image-20221116090903737" style="zoom:80%;" />
</li>
<li>
<p>TCP连接是由五元组&lt;源端IP地址、源端口号、目的IP地址、目的端口号、协议&gt;来唯一标识</p>
<blockquote>
<p>发送端套接口和接收端套接口加上协议类型</p>
</blockquote>
</li>
</ul>
<p><strong>可靠的数据传输</strong></p>
<ul>
<li>连接建立：在发送主机和接收主机之间协商初始<strong>序列号</strong>（最重要）等信息</li>
<li>连接管理：使用<strong>滑动窗口</strong>算法对数据传输进行管理，包括确认重传、流量控制和拥塞控制等</li>
<li>连接释放：数据传输结束后释放连接，发送主机和接收主机释</li>
</ul>
<h4 id="tcp-连接建立和释放">TCP 连接建立和释放</h4>
<p><strong>三步握手</strong></p>
<blockquote>
<p><strong>初始序列号</strong>、窗口大小、最大数据段尺寸等参数的协商，并且分配连接所需要端点资源</p>
</blockquote>
<ol>
<li>主机1 设置好SYN标志，SYN+ACK可以看成<strong>一字节</strong>，序列号x</li>
<li>主机2 ACK=x+1 ，SYN=y</li>
<li>主机1 ACK=y+1 希望接收的帧 SEQ=x+1</li>
</ol>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116091945498.png" alt="image-20221116091945498" style="zoom:80%;" />
<p>TCP<strong>请求连接碰撞</strong>：相互奔赴（相同的套接口建立连接）的时候建立一个连接，五元组唯一</p>
<p>TCP<strong>连接建立定时器</strong> ： 当SYN数据段发出时开始计时，一定时间未收到响应，则连接建立失败</p>
<p>TCP<strong>采用对称释放法释放连接</strong>  ：两边单独释放，都发送FIN=1的段和应答才可以。可以合并成<strong>三步握手</strong></p>
<blockquote>
<p>主机发送FIN后就不再发送数据了</p>
<p>计时器防止一方没有收到信号前另一方下线，即半连接状态一方还可以发数据</p>
</blockquote>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221116092541391.png" alt="image-20221116092541391" style="zoom:80%;" />
<p><strong>TCP的有限自动机</strong></p>
<ul>
<li>通过事件触发状态的转化，简化版本</li>
<li>收到FIN并发送后，仍然需要<strong>等待两倍数据段寿命</strong>后释放连接
<ul>
<li>防止网上的数据还没有传输结束，如果后一次连接使用了同样的端口，则旧数据就会成功接收</li>
</ul>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121095134320.png" alt="image-20221121095134320"  />
<p><strong>TCP释放连接相关定时器</strong></p>
<p><strong>闲置定时器</strong>(Quiet Timer)： 当TCP连接断开后，为防止该连接上的数据段还在网络上，并被后续打开的相同五元组的连接接收，要设置闲置定时器以<strong>防止刚刚断开连接的端口号被立即重新使用</strong></p>
<p><strong>保持存活定时器</strong>(Keep-Alive Timer)： 当一个<strong>连接长时间闲置</strong>时，保持存活定时器会超时而使一方去检测另一方是否仍然存在，如果它未得到响应，便<strong>终止该连接</strong>  。很多网络应用不管一会就断了。</p>
<h2 id="tcp滑动窗口机制">TCP滑动窗口机制</h2>
<ul>
<li>可靠有序的传输</li>
<li>流量控制
<ul>
<li>接收端可根据可用剩余缓冲区来指定窗口大小， 并<strong>通知发送端</strong>，发送端根据窗口大小来<strong>设置发送窗口</strong></li>
<li>缓冲区满  ，不发数据段，但是仍然可以发送紧急数据 （如用户紧急停止进程）和一字节的通知对方更新窗口大小的数据段</li>
</ul>
</li>
</ul>
<h3 id="流量控制">流量控制</h3>
<ul>
<li>发送端只要收到了对方的确认，这里以数据段为单位，发送窗口就可前移</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121101555981.png" alt="image-20221121101555981"  />
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121101611282.png" alt="image-20221121101611282"  />
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121101626061.png" alt="image-20221121101626061"  />
<ul>
<li>丢失情况
<ul>
<li>TCP对每一个TCP发送数据段都<strong>设置重传定时器</strong></li>
<li>确认号是期待下次接收到的数据</li>
<li>重传没有确认的已发送数据段，此时301,401都收到了，到这时<strong>B才开始一把子确认</strong></li>
<li>win=0表示满了，不能再接受了，同时确认包括501之前的内容都被接收到</li>
</ul>
</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121102351735.png" alt="image-20221121102351735" style="zoom: 80%;" />
<ul>
<li>
<p>接收端缓存区管理</p>
<ul>
<li>乱序确定和读取速度适配</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/Ann-103/blog_img/course/image-20221121103125058.png" alt="image-20221121103125058" style="zoom: 80%;" />
</li>
</ul>
<p><strong>傻瓜窗口症状</strong>：一个一个耗</p>
<ul>
<li><strong>发送端</strong>的TCP每次接收到来自应用的<strong>一字节的数据</strong>后就发送</li>
<li>当<strong>接收端</strong>的TCP<strong>缓冲区已满</strong>，接收端会向发送端发送窗口大小为0的数据，而此时接收端的<strong>应用进程以交互方式每次只读取一个字节</strong>  ，故接收端又发送窗口大小为一个字节的更新数据段，发送端应邀发送一个字节的数据，于是窗口又满了，循环往复…</li>
</ul>
<p><strong>解决</strong></p>
<ul>
<li>Nagle算法：禁止发送端发送太小的数据段，而是等到有一定数量的数据后再发送</li>
<li>Clark算法：禁止接收端发送1个字节大小的窗口更新信息，而是要等到有了一定数量的可用空间后再通知对方</li>
</ul>
<p><strong>死锁问题</strong></p>
<ul>
<li>为了让发送端暂停发送数据，接收端发送一个窗口大小为0的确认。后来，接收端又发送了一个更新了窗口大小的数据段，但该数据段丢失，于是，双方都处于等待</li>
<li><strong>持续定时器</strong>  ：发送端在收到接收端发来一个窗口大小为0的数据段时，就启动持续定时器  ，超时就发1字节的探测数据段，对该探测数据段的响应应包含了窗口大小，若仍为0，则定时器清0，否则则可以发送数据</li>
</ul>
<h3 id="确认重传">确认重传</h3>
<ul>
<li>
<p>Timeout太长-导致发送端的等待时间太长</p>
</li>
<li>
<p>Timeout太短 – 重传多余的不必要的数据</p>
</li>
<li>
<p>不断测量网络性能并不断调整</p>
<ul>
<li>
<p>对每条连接， TCP均保存变量RTT， 用于存放到目的端的<strong>往返时间</strong>的估计值</p>
</li>
<li>
<p>发送启动定时器，超时重弄，否则记录时间M并使用修正公式</p>
<img src="assets/image-20221121105302011.png" alt="image-20221121105302011" style="zoom: 80%;" />
</li>
</ul>
</li>
<li>
<p>Timeout设置</p>
<img src="assets/image-20221121110213040.png" alt="image-20221121110213040" style="zoom: 80%;" />
</li>
<li>
<p>几点说明</p>
<ul>
<li>每个TCP连接都只维护一个Timeout/RTT变量，使用Jacobson
<ul>
<li>对于第一次发送的TCP数据段，设置重传定时器的值为Timeout</li>
<li>只有<strong>第一次发送的TCP数据段并且在Timeout之前收到对该数据段的ACK</strong>时才能使用算法更新TCP连接的Timeout/RTT值</li>
</ul>
</li>
<li>对于已发送过一次的TCP数据段，如果在timeout之前仍然没有收到对该数据段的ACK，则根据Karn算法来设置下次发送的重传定时器的超时值
<ul>
<li>对已经重传的数据段无需修改RTT， 而是在每次传输失败时将超时时间(Timeout)加倍，直到该数据段被成功传输，即超时值=Timeout&lt;&lt;retransmission_number</li>
</ul>
</li>
</ul>
</li>
<li>
<p>为什么重发后要保持RTT值不变</p>
<ul>
<li>发送端<strong>无法区分ACK</strong>是对哪次发送的TCP数据段的确认，所以重发数据段后收到的ACK后不会更新RTT值</li>
</ul>
</li>
</ul>
<p><strong>ACK延时定时器</strong>  ：不需要立即回复，而是顺便发送数据</p>
<p><strong>选择确认SACK</strong>： 接收端收到序列号不连续的数据段，原因是某些数据段可能被丢失  。把这些信息准确地告诉发送端， 使发送端不要再重复发送这些已收到的数据段</p>
<h3 id="拥塞控制">拥塞控制</h3>
<ul>
<li>
<p>网络中出现太多的分组（业务负载分布不均衡  ，输出带宽、存储、处理器受限  ），超过路由器的处理能力时，  分组在路由器上的排队延迟和丢弃概率增大</p>
<ul>
<li>源主机大量重传分组</li>
<li>网络有效吞吐量下降</li>
</ul>
</li>
<li>
<p>拥塞是网络层，但是TCP是传输层，所以如何判断网络拥塞：发送端出现数据段超时重传  ？</p>
<blockquote>
<p>现在使用无线上网很容易丢包，不能同样看成拥塞，故无线对TCP的性能下降厉害，后研适用的TCP</p>
</blockquote>
</li>
</ul>
<div class="note info flat"><p>拥塞窗口还是涉及到了网络，比较复杂</p>
</div>
<p>每一个 TCP 连接需要维护两个窗口</p>
<ul>
<li>接收窗口 rwnd (receiver window) 又称为通知窗口(advertised window)
<ul>
<li>接收端根据其目前的可用接收缓存大小所许诺的最新的窗口值，是来自接收端的<strong>流量控制</strong>。</li>
<li>接收端将此窗口值放在 TCP数据段头标中的窗口大小域传送给发送端</li>
</ul>
</li>
<li>拥塞窗口 cwnd
<ul>
<li>发送端根据自己估计的网络拥塞程度而设置的窗口值</li>
</ul>
</li>
</ul>
<p>发送窗口：上限值应当取为接收窗口  rwnd 和拥塞窗口 cwnd 这两个变量中<strong>较小的一个</strong></p>
<h4 id="tcp拥塞控制算法">TCP拥塞控制算法</h4>
<p><strong>慢启动算法</strong></p>
<ul>
<li>
<p>连接建立初期，拥塞窗口初始化为该连接最大数据段的长度</p>
</li>
<li>
<p>发送端发送一个最大数据段，得到确认后，其拥塞窗口大小加倍，  直到发送端<strong>认为</strong>出现数据段丢失或已达到接收窗口大小 ，且兼顾拥塞和流量控制</p>
<blockquote>
<p>我们并不仅用超时重传，还有其他的判断比如发送端受到多个重复确认的时候，出现了数据段丢失timeout and/or   three duplicate ACKs  。即还没有重传我们就知道快要重传了。</p>
</blockquote>
</li>
<li>
<p>称为慢启动原因：虽然指数速度，但是从1开始</p>
</li>
</ul>
<p><strong>快速重传</strong>：ACK三个重复即重传</p>
<blockquote>
<p>从实验可知ack已经确认即可。</p>
</blockquote>
<p><strong>TCP拥塞控制算法过程</strong></p>
<img src="assets/image-20221123082920402.png" alt="image-20221123082920402" style="zoom:80%;" />
<p><strong>加法增大</strong>  ：拥塞避免算法后，在收到对所有数据段的确认后 ，即经过一个往返时间），就把拥塞窗口增加一个 MSS 大小，使拥塞窗口缓慢增大，以防止网络过早出现拥塞</p>
<p><strong>乘法减小</strong>：慢启动阶段还是拥塞避免阶段，只要出现一次超时或者认为发送的数据段出现丢失时（即出现一次网络拥塞），就把慢启动阈值 ssthresh 设置为当前的拥塞窗口乘以 0.5</p>
<p><strong>快速恢复</strong>： 发送端收到连续三个重复的确认时，执行“乘法减小”算法， 把 ssthresh 设置为当前拥塞窗口值减半。但接下来<strong>不执行慢启动算法</strong>  将拥塞的时候能够更<strong>好达到传输容量</strong>，从而实现吞吐量的增加。</p>
<blockquote>
<p>慢启动阈值，即当前网络的粗略估计，那我们不需要每次都降低到慢启动。</p>
</blockquote>
<img src="assets/image-20221123083225839.png" alt="image-20221123083225839" style="zoom: 80%;" />
<h2 id="berkeley-socket">Berkeley Socket</h2>
<h1 id="chapter-8-应用层-域名系统的资源类型a-mx-ns-mime基于传统">Chapter 8 应用层（域名系统的资源类型A,MX,NS，MIME基于传统）</h1>
<p>域名系统（DNS： Domain Name System）负责域名的维护和管理</p>
<ul>
<li>用户的绝大部分网络服务访问都需要使用DNS<br>
◼ www服务、文件传输服务、电子邮件服务等等</li>
</ul>
<blockquote>
<p>针对DNS的攻击，将访问的网站篡改，或者一些盗版行为也是更改hosts.txt不访问正版的网页、</p>
</blockquote>
<p><strong>层次化名字空间</strong></p>
<ul>
<li>
<p>域名：每一个层次有多个名字，对应不同的域</p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="http://xn--baidu-4h1hkjig07cz5mj5g6wafa997k23fmoia21jizgea4232ap58b185b0wggk5a61uo64f.com">域名由定义该层及以其上层名字的字符串组成比如baidu.com</a></p>
<img src="assets/image-20221123085802851.png" alt="image-20221123085802851" style="zoom:80%;" />
</li>
</ul>
<blockquote>
<p>只需要保证下一层不冲突即可</p>
<p>命名机制遵循的是组织边界，而不是物理网络的边界  。实际上的服务器放哪里都行，并不限制ip。</p>
</blockquote>
<h3 id="分布式域名管理">分布式域名管理</h3>
<ul>
<li>名字服务器（开源）。如果连不上网络首先查是否能</li>
<li>DNS实现，使用客户/服务器通信模式，客户ton过解析器向名字服务器发送查询请求。使用UDP。端口53好，有的也用TCP。</li>
</ul>
<blockquote>
<p>DNS名字空间被划分为一些不重叠的区域（Zone）， 每个区域的信息保存在该区域对应的名字服务器上，该服务器也被称为所在区域的授权名字服务器</p>
</blockquote>
<p><strong>授权名字服务器</strong>：允许各个组织根据具体情况将本组织内的域划分为若干个区域(zone)，并在各区域中设置相应的授权名字服务器</p>
<p><strong>根名字服务器</strong>：保存了所有顶级域名字服务器的IP地址  ，在全球多地部署</p>
<p><strong>资源记录格式</strong></p>
<ul>
<li>
<p>名字服务器以资源记录的形式来维护本区域内的域名相关信息</p>
<ul>
<li>当解析器给名字服务器一个域名，取回的是一个与该域名相对应的资源记录。所以DNS系统的实际功能就是把域名映射到一条记录上</li>
<li>时间是因为，ip和域名并不是静态对应的，可以将服务器放在任何位置</li>
</ul>
</li>
<li>
<p>一条资源记录共有5个字段：</p>
<ul>
<li>Domain_name, Time_to_live, Type, Class, Value</li>
<li>Time_to_live：生存时间，例如，时间较长的有一天（86400秒），短的有一分钟（60秒）</li>
<li>Type：指出记录的类型（下一页详细解释）Class:对Internet,是IN</li>
<li>Value：可以是数字、域名或ASCII字符，其语义基于记录类型</li>
</ul>
</li>
</ul>
<p><strong>资源记录类型</strong></p>
<ul>
<li>权威记录： Authoritative Record<br>
◼ 来自管理该记录的授权名字服务器，因此总是正确的</li>
<li>缓存记录： Cached Record<br>
◼ 名字服务器缓存来自其它名字服务器的记录，这些有效期由TTL域指定，当TTL过期时，该纪录被删除</li>
</ul>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://xn--top-628dp2ndwaz7hh6oz3erz5apunu70a9uey9ipo5azo0d.cs.vu.xn--nlcs-6k0i458g.vu.nl">部分内容可能省略不显示比如top.cs.vu.nl显示cs.vu.nl</a></p>
</blockquote>
<p><strong>域名查询</strong></p>
<ul>
<li>
<p>访问web服务，在浏览器中键入web服务器域名</p>
</li>
<li>
<p>主机的域名解析首先查询本机的cache和host</p>
</li>
<li>
<p>如果没有，则想名字服务器请求域名服务</p>
<ul>
<li>
<p>迭代查询（常用）：向高层次名字服务器进行请求，被请求的服务器返回一个可供查询的名字服务器地址返回ns记录类型，即服务器名字</p>
<blockquote>
<p>名字服务器进行域名的查询和解析</p>
<p>可以并不从根名字服务器开始，如果存储了顶级域或次级域也可以，如果啥也没有，至少也有根服务器</p>
</blockquote>
</li>
<li>
<p>递归查询（少用）：从顶级到低级，一路查询后沿原路径返回</p>
</li>
</ul>
</li>
</ul>
<h2 id="www-万维网">WWW 万维网</h2>
<blockquote>
<p>可以看成是一个大的分布式文件系统，文件类型是web页面，使用HTML编写，使用HTTP等协议访问</p>
</blockquote>
<ul>
<li>超文本页面：原本的web页面是数据和文本，分布于世界各地故称超</li>
<li>超媒体页面：扩充，有视频等，使用超链接技术互相访问</li>
<li>URL：统一资源定位符   （应用层地址/七层地址），可以访问web页面等资源，有唯一的URL</li>
</ul>
<h3 id="url：统一资源定位符-应用层地址-七层地址">URL：统一资源定位符 （应用层地址/七层地址）</h3>
<blockquote>
<p>给资源提供一种抽象的识别方法，进而存取更新查找等。相当于internet 网络节点上的任何可访问对象的一个指针</p>
</blockquote>
<ul>
<li>
<p>大小不区分，端口缺省，知名端口是8080等</p>
</li>
<li>
<p>路径和文件名缺省则指向index.html的缺省页面</p>
</li>
<li>
<p><img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128102008833.png" alt="image-20221128102008833"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://abc.com:8080/tech/index.html</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="超文本传输协议http">超文本传输协议HTTP</h3>
<div class="note info flat"><p>一个基于文本的协议，除了图片等信息都能看懂</p>
</div>
<blockquote>
<p>应用层协议，传输层使用TCP协议</p>
<p>客户/服务器模式，指定客户可以发送什么样的消息和得到什么样的响应消息</p>
<p>会建立很多tcp连接</p>
</blockquote>
<ul>
<li>由客户向服务器发出TCP连接请求，服务器缺省工作在80端口，服务器接受连接请求并与客户建立TCP连接</li>
<li>在客户与服务器之间交互HTTP消息</li>
<li>客户或者服务器发起关闭TCP连接</li>
</ul>
<h3 id="www工作过程">WWW工作过程</h3>
<ul>
<li>点击或者输入URL</li>
<li>分析主机域名，通过DNS找到web服务器的IP地址</li>
<li>浏览器与web服务器80端口进行TCP连接（缺省）</li>
<li>向web服务器发送HTTP请求，要求获得某个web页面</li>
<li>服务器服务器通过HTTP响应消息传送web页面</li>
<li>TCP连接被释放</li>
<li>浏览器在本机上显示web页面</li>
</ul>
<h3 id="http消息格式">HTTP消息格式</h3>
<div class="tabs" id="http请求格式"><ul class="nav-tabs"><button type="button" class="tab  active" data-href="http请求格式-1">请求信息格式</button><button type="button" class="tab " data-href="http请求格式-2">响应信息格式</button></ul><div class="tab-contents"><div class="tab-item-content active" id="http请求格式-1"><img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128103555878.png" alt="image-20221128103555878" style="zoom:67%;" />
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128103827039.png" alt="image-20221128103827039" style="zoom: 67%;" /></div><div class="tab-item-content" id="http请求格式-2"><img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128103918487.png" alt="image-20221128103918487" style="zoom: 80%;" />
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128103934623.png" alt="image-20221128103934623" style="zoom: 80%;" /></div></div><div class="tab-to-top"><button type="button" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div>
<h2 id="电子邮件">电子邮件</h2>
<blockquote>
<p>非实时非可靠的系统</p>
</blockquote>
<p><strong>消息交换协议</strong></p>
<ul>
<li>
<p>发送email</p>
<ul>
<li>简单邮件传输协议 <strong>SMTP</strong> （Simple Mail Transfer Protocol）</li>
</ul>
</li>
<li>
<p>接收email</p>
<ul>
<li>邮局协议第3版<strong>POP3</strong>（Post Office Protocol version 3）</li>
<li>Internet消息访问协议IMAP（Internet Message AccessProtocol）</li>
</ul>
</li>
</ul>
<p><strong>消息格式协议</strong></p>
<ul>
<li>基本的ASCII的文本邮件</li>
<li>多用途Internet邮件扩展 MIME（MultipurposeInternet Mail Extensions），支持多媒体邮件，不仅仅<br>
限于ASCII字符及文本信息</li>
</ul>
<blockquote>
<p>早期邮件传输文本，使用ascii编码，利用闲置的最高位进行额外的控制，后期发展到图片等之后，使用MIME协议使用base64编码转为ascii编码</p>
</blockquote>
<p><strong>电子邮件系统架构</strong></p>
<ul>
<li>用户名@邮件服务器的域名  ，邮件服务器的域，进行DNS查询（MX记录）获得该域的邮件服务器的IP地址</li>
<li>UA：User Agent：用户代理，邮件编辑软件等</li>
<li>发送运行在2  ，基于Push  ，MTA之间运行SMTP协议</li>
<li>接收运行在 8，以及Pull，MAA之间POP3，IMAP协议</li>
</ul>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128104900839.png" alt="image-20221128104900839" style="zoom: 80%;" />
<p>邮件格式：</p>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128105914289.png" alt="image-20221128105914289" style="zoom:80%;" />
<p><strong>MIME协议</strong></p>
<ul>
<li>
<p>将非NVT ASCII数据转化后，通过Email发送</p>
</li>
<li>
<p>Base 64：使用了64个字符的编解码，分成六个字符后0-63，以及特殊字符=</p>
</li>
<li>
<p>通过六个01确定a，然后找a的ascii码</p>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128110350422.png" alt="image-20221128110350422" style="zoom: 80%;" />
</li>
</ul>
<p><strong>ESMTP (Extended SMTP)</strong>：相比于SMTP增加了认证，即输入账号密码才能使用电子邮件的服务器-</p>
<img src="https://cdn.jsdelivr.net/gh/A-624/blog_img/course/image-20221128111308642.png" alt="image-20221128111308642" style="zoom:67%;" />
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://Ann-103.github.io">Ann</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://ann-103.github.io/post/2635928687.html">https://ann-103.github.io/post/2635928687.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://Ann-103.github.io" target="_blank">Ann-Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/notebook/">notebook</a><a class="post-meta__tags" href="/tags/network/">network</a></div><div class="post_share"><div class="social-share" data-image="https://s2.loli.net/2024/11/14/RbtQCHjSEMZJoUs.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/671154427.html" title="vim"><img class="cover" src="https://s2.loli.net/2024/11/22/Mi3joHI7l5nNh28.jpg" onerror="onerror=null;src='/img/loading.gif'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">vim</div></div></a></div><div class="next-post pull-right"><a href="/post/2122796003.html" title="算法排序"><img class="cover" src="https://s2.loli.net/2024/11/22/GXwuEP8UlBzOyAe.jpg" onerror="onerror=null;src='/img/loading.gif'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法排序</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/2635928686.html" title="计算机网络学习笔记（一）"><img class="cover" src="https://s2.loli.net/2024/11/22/mXWGr3dYoDjVHy8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-18</div><div class="title">计算机网络学习笔记（一）</div></div></a></div><div><a href="/post/4227902866.html" title="计算机网络学习笔记（二）"><img class="cover" src="https://s2.loli.net/2024/11/22/HgvTujcKwQVEzUp.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-19</div><div class="title">计算机网络学习笔记（二）</div></div></a></div><div><a href="/post/2635928688.html" title="计算机网络学习笔记（三）"><img class="cover" src="https://s2.loli.net/2024/11/22/tskKGfpo2LTOzQ5.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-10-21</div><div class="title">计算机网络学习笔记（三）</div></div></a></div><div><a href="/post/3295482393.html" title="C语言速成"><img class="cover" src="https://s2.loli.net/2024/11/22/5URrAIsnJQOFhvV.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-30</div><div class="title">C语言速成</div></div></a></div><div><a href="/post/4168610783.html" title="公钥密码学算法"><img class="cover" src="https://s2.loli.net/2024/11/16/tMZWN6q91dJjygO.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-28</div><div class="title">公钥密码学算法</div></div></a></div><div><a href="/post/127297243.html" title="数据结构"><img class="cover" src="https://s2.loli.net/2024/11/22/B9HgYzGE6oS3UWL.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-22</div><div class="title">数据结构</div></div></a></div></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ann</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">26</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Ann-103"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Ann-103" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:ajw0822@mail.ustc.edu.cn" target="_blank" title="Em"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="iconfont icon-gonggao"></i><span>公告</span></div><div class="announcement_content">欢迎访问我的小破站 ❤</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-6-internet-protocol-ip%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.</span> <span class="toc-text">Chapter 6 Internet Protocol    IP协议</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E6%96%87"><span class="toc-number">1.1.</span> <span class="toc-text">英文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%9C%B0%E5%9D%80-%E5%BD%A2%E5%BC%8F%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%B9%E6%B3%95-%E5%92%8Cmac%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.2.</span> <span class="toc-text">IP地址（形式和配置方法，和mac的区别）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ip"><span class="toc-number">1.2.1.</span> <span class="toc-text">IP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.3.</span> <span class="toc-text">地址解析协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%BB%E5%9D%80"><span class="toc-number">1.3.1.</span> <span class="toc-text">寻址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90-%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E4%BD%9C%E7%94%A8%E5%92%8C%E8%BF%87%E7%A8%8B"><span class="toc-number">1.3.2.</span> <span class="toc-text">地址解析（地址解析作用和过程）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arp%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.3.3.</span> <span class="toc-text">ARP协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E5%8D%8F%E8%AE%AE-%E8%AE%A1%E7%AE%97%EF%BC%9Aip%E5%88%86%E6%AE%B5%E5%8E%9F%E5%9B%A0%E5%8E%9F%E7%90%86-8%E5%AD%97%E8%8A%82-%E7%9A%84%E6%95%B4%E6%95%B0%E5%80%8D"><span class="toc-number">1.4.</span> <span class="toc-text">IP协议（计算：IP分段原因原理，8字节 的整数倍）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E8%B7%AF%E7%94%B1%E5%92%8C%E8%BD%AC%E5%8F%91"><span class="toc-number">1.5.</span> <span class="toc-text">IP路由和转发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.5.1.</span> <span class="toc-text">路由协议</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#icmp%E5%8D%8F%E8%AE%AE%EF%BC%9Ainternet-%E6%8E%A7%E5%88%B6%E6%B6%88%E6%81%AF%E5%8D%8F%E8%AE%AE"><span class="toc-number">1.6.</span> <span class="toc-text">ICMP协议：Internet 控制消息协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ip%E7%BB%84%E6%92%AD"><span class="toc-number">1.7.</span> <span class="toc-text">IP组播</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv4%E5%8F%AF%E6%89%A9%E5%B1%95%E6%80%A7-%E5%AD%90%E7%BD%91%E5%88%92%E5%88%86-%E6%9C%80%E9%95%BF%E5%89%8D%E7%BC%80%E6%98%AF%E4%B8%8D%E7%9F%A5%E9%81%93%E9%95%BF%E5%BA%A6-cidr%E6%9C%89%E5%89%8D%E7%BC%80%E6%B1%87%E8%81%9A%E5%92%8C%E6%9C%80%E9%95%BF%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99-%E5%B0%BD%E9%87%8F%E5%B0%91"><span class="toc-number">1.8.</span> <span class="toc-text">IPv4可扩展性（子网划分，最长前缀是不知道长度，CIDR有前缀汇聚和最长匹配规则，尽量少）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ipv6"><span class="toc-number">1.9.</span> <span class="toc-text">IPv6</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-7-%E4%BC%A0%E8%BE%93%E5%B1%82-%E7%AB%AF%E5%88%B0%E7%AB%AF-%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8E%9F%E5%9B%A0-%E4%BC%A0%E8%BE%93%E5%B1%82%E7%AB%AF%E5%8F%A3%E5%AF%BB%E5%9D%80-tcp%E6%8B%A5%E5%A1%9E-%E9%87%8D%E4%BC%A0%E5%AE%9A%E6%97%B6%E5%99%A8-socket-tcp%E5%BA%8F%E5%88%97%E5%8F%B7%E5%92%8C%E9%80%9F%E7%8E%87"><span class="toc-number">2.</span> <span class="toc-text">Chapter 7 传输层（端到端，传输层原因，传输层端口寻址，tcp拥塞，重传定时器，socket，tcp序列号和速率）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8B%B1%E6%96%87"><span class="toc-number">2.1.</span> <span class="toc-text">英文</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82%E6%9C%8D%E5%8A%A1"><span class="toc-number">2.2.</span> <span class="toc-text">传输层服务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.3.</span> <span class="toc-text">建立连接</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.3.1.</span> <span class="toc-text">建立连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8A%E6%94%BE%E8%BF%9E%E6%8E%A5"><span class="toc-number">2.3.2.</span> <span class="toc-text">释放连接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#internet-%E4%BC%A0%E8%BE%93%E5%B1%82%E5%8D%8F%E8%AE%AE"><span class="toc-number">2.4.</span> <span class="toc-text">Internet 传输层协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#interinternet%E5%AF%BB%E5%9D%80%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.4.1.</span> <span class="toc-text">InterInternet寻址模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%8A%A5%E5%8D%8F%E8%AE%AE-udp"><span class="toc-number">2.4.2.</span> <span class="toc-text">用户数据报协议-UDP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E8%BE%93%E6%8E%A7%E5%88%B6%E5%8D%8F%E8%AE%AE-tcp-%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">2.4.3.</span> <span class="toc-text">传输控制协议-TCP（拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp-%E8%BF%9E%E6%8E%A5%E5%BB%BA%E7%AB%8B%E5%92%8C%E9%87%8A%E6%94%BE"><span class="toc-number">2.4.3.1.</span> <span class="toc-text">TCP 连接建立和释放</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#tcp%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3%E6%9C%BA%E5%88%B6"><span class="toc-number">2.5.</span> <span class="toc-text">TCP滑动窗口机制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="toc-number">2.5.1.</span> <span class="toc-text">流量控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AE%E8%AE%A4%E9%87%8D%E4%BC%A0"><span class="toc-number">2.5.2.</span> <span class="toc-text">确认重传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="toc-number">2.5.3.</span> <span class="toc-text">拥塞控制</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#tcp%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95"><span class="toc-number">2.5.3.1.</span> <span class="toc-text">TCP拥塞控制算法</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#berkeley-socket"><span class="toc-number">2.6.</span> <span class="toc-text">Berkeley Socket</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#chapter-8-%E5%BA%94%E7%94%A8%E5%B1%82-%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%B5%84%E6%BA%90%E7%B1%BB%E5%9E%8Ba-mx-ns-mime%E5%9F%BA%E4%BA%8E%E4%BC%A0%E7%BB%9F"><span class="toc-number">3.</span> <span class="toc-text">Chapter 8 应用层（域名系统的资源类型A,MX,NS，MIME基于传统）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E5%9F%9F%E5%90%8D%E7%AE%A1%E7%90%86"><span class="toc-number">3.0.1.</span> <span class="toc-text">分布式域名管理</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#www-%E4%B8%87%E7%BB%B4%E7%BD%91"><span class="toc-number">3.1.</span> <span class="toc-text">WWW 万维网</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#url%EF%BC%9A%E7%BB%9F%E4%B8%80%E8%B5%84%E6%BA%90%E5%AE%9A%E4%BD%8D%E7%AC%A6-%E5%BA%94%E7%94%A8%E5%B1%82%E5%9C%B0%E5%9D%80-%E4%B8%83%E5%B1%82%E5%9C%B0%E5%9D%80"><span class="toc-number">3.1.1.</span> <span class="toc-text">URL：统一资源定位符 （应用层地址&#x2F;七层地址）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B6%85%E6%96%87%E6%9C%AC%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AEhttp"><span class="toc-number">3.1.2.</span> <span class="toc-text">超文本传输协议HTTP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#www%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="toc-number">3.1.3.</span> <span class="toc-text">WWW工作过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#http%E6%B6%88%E6%81%AF%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">HTTP消息格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%B5%E5%AD%90%E9%82%AE%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">电子邮件</span></a></li></ol></li></ol></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2024 By Ann</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"> </i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="iconfont icon-triangleupfill"></i></button><button id="go-down" type="button" title="to_bottom" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="iconfont icon-triangledownfill"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.8.8/dist/lazyload.iife.min.js"></script><div class="js-pjax"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/copy-tex.min.js"></script><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script><script>(() => {
  const initValine = () => {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'jlgkfToE73FxTz8kyHsmvdzb-gzGzoHsz',
      appKey: 'NN6nCIT47fGwz5Q1UyvFcGKP',
      avatar: 'retro',
      serverURLs: '',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  const loadValine = async () => {
    if (typeof Valine === 'function') initValine()
    else {
      await getScript('https://cdn.jsdelivr.net/npm/valine@1.5.1/dist/Valine.min.js')
      initValine()
    }
  }

  if ('Valine' === 'Valine' || !false) {
    if (false) btf.loadComment(document.getElementById('vcomment'),loadValine)
    else setTimeout(loadValine, 0)
  } else {
    window.loadOtherComment = loadValine
  }
})()</script></div><script async data-pjax src="/js/custom.js"></script><script async data-pjax src="/js/waterfall/waterfall.js"></script><script src="/Ann/random.js"></script><script src="/js/snowflake.js"></script><script src="/js/hot.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener
  btf.removeGlobalFnEvent('pjax')
  btf.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/algoliasearch@4.22.1/dist/algoliasearch-lite.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@4.65.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js?v=4.13.0"></script></div></div></body></html>